{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/rafa/tudo/materias/redes/redesfront/src/lib/requisition.tsx"],"sourcesContent":["\"use client\";\nconst backendUrl = \"https://backredes-production.up.railway.app\";\nimport axios from \"axios\";\nimport { CardPdfPost, CardPngPost, CardTxtPost, Post } from \"./interfaces\";\nimport { UserProfileData } from \"@/lib/interfaces\";\n\nexport async function login(values: { name: string; password: string }) {\n  const response = await axios.post(`${backendUrl}/auth/login`, values);\n  return response;\n}\n\nexport async function register(\n  values: {\n    name: string;\n    password: string;\n    bio: string;\n    job: string;\n  },\n  file: File | null,\n) {\n  const form_data = new FormData();\n  if (file) {\n    form_data.append(\"image\", file);\n  }\n  form_data.append(\"name\", values.name);\n  form_data.append(\"password\", values.password);\n  form_data.append(\"bio\", values.bio);\n  form_data.append(\"job\", values.job);\n\n  const response = await axios.post(`${backendUrl}/user`, form_data, {\n    headers: { \"Content-Type\": \"multipart/form-data\" },\n  });\n\n  return response;\n}\n\nexport async function editProfileRequisition(\n  data: {\n    name: string | undefined;\n    password: string | undefined;\n    bio: string | undefined;\n    job: string | undefined;\n  },\n  file: File | null,\n) {\n  const token = localStorage.getItem(\"token\");\n\n  const fields_edition = await axios.patch(`${backendUrl}/user`, data, {\n    headers: { Authorization: `Bearer ${token}` },\n  });\n  if (file) {\n    const form_data = new FormData();\n    form_data.append(\"image\", file);\n\n    const image_edition = await axios.patch(\n      `${backendUrl}/user/image`,\n      form_data,\n      { headers: { Authorization: `Bearer ${token}` } },\n    );\n    return { fields_edition, image_edition };\n  }\n\n  return { fields_edition };\n}\n\nexport async function getPosts() {\n  const token = localStorage.getItem(\"token\");\n\n  const result = await Promise.all([\n    axios.get(`${backendUrl}/post/recent`, {\n      headers: { Authorization: `Bearer ${token}` },\n    }),\n    axios.get(`${backendUrl}/pdf/recent`, {\n      headers: { Authorization: `Bearer ${token}` },\n    }),\n    axios.get(`${backendUrl}/png/recent`, {\n      headers: { Authorization: `Bearer ${token}` },\n    }),\n  ]);\n\n  const [txt_result, pdf_result, png_result] = result.values();\n\n  if (\n    txt_result.status === 200 &&\n    pdf_result.status === 200 &&\n    png_result.status === 200\n  ) {\n    const txts: ServerTxtPost[] = txt_result.data;\n    const pdfs: ServerPdfPost[] = pdf_result.data;\n    const pngs: ServerPngPost[] = png_result.data;\n\n    const posts: Post[] = [\n      ...txts.map(servToCardTxtPost),\n      ...pdfs.map(servToCardPdfPost),\n      ...pngs.map(servToCardPngPost),\n    ];\n\n    return posts;\n  }\n\n  throw new Error(\"Failed to fetch posts\");\n}\n\nexport async function getUsers() {\n  const token = localStorage.getItem(\"token\");\n\n  const result = await axios.get(`${backendUrl}/user`, {\n    headers: { Authorization: `Bearer ${token}` },\n  });\n\n  if (result.status === 200) {\n    const user: ServerUser[] = result.data;\n\n    return user;\n  }\n\n  throw new Error(\"Failed to fetch user\");\n}\n\nexport async function getUserProfile(user_id: string) {\n  const token = localStorage.getItem(\"token\");\n\n  const result = await axios.get(`${backendUrl}/user/profile${user_id}`, {\n    headers: { Authorization: `Bearer ${token}` },\n  });\n\n  if (result.status === 200) {\n    const user: ServerUserProfile = result.data;\n\n    const client_data: UserProfileData = {\n      id: user.id,\n      owner: user.owner,\n      name: user.name,\n      bio: user.bio,\n      image: user.image,\n      job: user.job,\n      posts: [\n        ...user.posts.map(servToCardTxtPost),\n        ...user.pdfs.map(servToCardPdfPost),\n        ...user.pngs.map(servToCardPngPost),\n      ],\n    };\n\n    return client_data;\n  }\n\n  throw new Error(\"Failed to fetch user\");\n}\n\nexport async function makeFilePost(\n  file: File,\n  title: string,\n  type: \"pdf\" | \"png\",\n) {\n  if (file.name.split(\".\").at(-1) != type) {\n    throw new Error(\"formato de arquivo inv√°lido\");\n  }\n\n  const token = localStorage.getItem(\"token\");\n  const form_data = new FormData();\n  form_data.append(\"title\", title);\n  form_data.append(\"image\", file);\n\n  const response = await axios.post(`${backendUrl}/${type}`, form_data, {\n    headers: {\n      \"Content-Type\": \"multipart/form-data\",\n      Authorization: `Bearer ${token}`,\n    },\n  });\n\n  return response;\n}\n\nexport function getPngUrl(entity_id: number, entity_type: \"user\" | \"post\") {\n  const path = `${backendUrl}/png/see${entity_type[0]}${entity_id}.png`;\n  console.log(path);\n  return path;\n}\n\nexport function getPdfUrl(entity_id: number) {\n  const path = `${backendUrl}/pdf/seep${entity_id}.pdf`;\n  console.log(path);\n  return path;\n}\n\ninterface ServerUserProfile {\n  id: number;\n  owner: boolean;\n  name: string;\n  image: string;\n  bio: string;\n  job: string;\n  pngs: ServerPngPost[];\n  pdfs: ServerPdfPost[];\n  posts: ServerTxtPost[];\n}\n\ninterface ServerUser {\n  id: number;\n  name: string;\n  image: string;\n  job: string;\n}\n\ninterface ServerTxtPost {\n  id: number;\n  title: string;\n  body: string;\n  createdAt: Date;\n  user: {\n    id: number;\n    name: string;\n  };\n}\n\ninterface ServerPdfPost {\n  id: number;\n  title: string;\n  file_name: string;\n  createdAt: Date;\n  user: {\n    id: number;\n    name: string;\n  };\n}\n\ninterface ServerPngPost {\n  id: number;\n  title: string;\n  file_name: string;\n  createdAt: Date;\n  user: {\n    id: number;\n    name: string;\n  };\n}\n\nfunction servToCardTxtPost(post: ServerTxtPost): CardTxtPost {\n  return {\n    txt: undefined,\n    id: post.id,\n    title: post.title,\n    body: post.body,\n    author_id: post.user.id,\n    author_name: post.user.name,\n  };\n}\n\nfunction servToCardPdfPost(post: ServerPdfPost): CardPdfPost {\n  return {\n    pdf: undefined,\n    id: post.id,\n    title: post.title,\n    file_name: post.file_name,\n    author_id: post.user.id,\n    author_name: post.user.name,\n  };\n}\n\nfunction servToCardPngPost(post: ServerPngPost): CardPngPost {\n  return {\n    png: undefined,\n    id: post.id,\n    title: post.title,\n    file_name: post.file_name,\n    author_id: post.user.id,\n    author_name: post.user.name,\n  };\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 203, "column": 0}, "map": {"version":3,"sources":["file:///home/rafa/tudo/materias/redes/redesfront/src/app/login/page.tsx"],"sourcesContent":["\"use client\";\nimport { Formik, Form, Field } from \"formik\";\nimport { useRouter } from \"next/navigation\";\nimport { login } from \"@/lib/requisition\";\n\ninterface FormValues {\n  name: string;\n  password: string;\n}\n\nexport default function LoginPage() {\n  const router = useRouter();\n\n  async function loginFormSubmit(values: FormValues) {\n    const response = await login(values);\n\n    if (response.status !== 201) {\n      console.log(response);\n      return;\n    }\n\n    const token = response.data;\n\n    if (!token || typeof token !== \"string\") {\n      console.error(\"Token is missing or it is not a string\");\n      return;\n    }\n\n    localStorage.setItem(\"token\", token);\n    router.push(\"/dashboard\");\n  }\n\n  function validate(values: FormValues) {\n    console.log(values);\n  }\n\n  return (\n    <div className=\"min-h-screen flex justify-center items-center\">\n      <Formik\n        onSubmit={loginFormSubmit}\n        validate={validate}\n        initialValues={{ name: \"\", password: \"\" }}\n      >\n        <Form className=\"bg-blue-300 p-8 rounded shadow-lg flex flex-col gap gap-5\">\n          <h1 className=\"text-2xl font-bold\">Login</h1>\n          <div className=\"flex flex-col gap-0.5\">\n            <label htmlFor=\"name\" className=\"text-sm\">\n              nome:\n            </label>\n            <Field\n              id=\"name\"\n              name=\"name\"\n              placeholder=\"Digite seu nome\"\n              className=\"bg-white border rounded px-2 py-1\"\n            />\n          </div>\n          <div className=\"flex flex-col gap-0.5\">\n            <label htmlFor=\"password\" className=\"text-sm\">\n              senha:\n            </label>\n            <Field\n              id=\"password\"\n              name=\"password\"\n              placeholder=\"Digite sua senha\"\n              className=\"bg-white border rounded px-2 py-1\"\n            />\n          </div>\n          <button\n            type=\"submit\"\n            className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\"\n          >\n            Login\n          </button>\n\n          <button\n            type=\"button\"\n            onClick={() => router.push(\"/register\")}\n            className=\"text-sm text-blue-500 hover:text-blue-700\"\n          >\n            cadastre-se\n          </button>\n        </Form>\n      </Formik>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;;;AAHA;;;;AAUe,SAAS;;IACtB,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAEvB,eAAe,gBAAgB,MAAkB;QAC/C,MAAM,WAAW,MAAM,CAAA,GAAA,6HAAA,CAAA,QAAK,AAAD,EAAE;QAE7B,IAAI,SAAS,MAAM,KAAK,KAAK;YAC3B,QAAQ,GAAG,CAAC;YACZ;QACF;QAEA,MAAM,QAAQ,SAAS,IAAI;QAE3B,IAAI,CAAC,SAAS,OAAO,UAAU,UAAU;YACvC,QAAQ,KAAK,CAAC;YACd;QACF;QAEA,aAAa,OAAO,CAAC,SAAS;QAC9B,OAAO,IAAI,CAAC;IACd;IAEA,SAAS,SAAS,MAAkB;QAClC,QAAQ,GAAG,CAAC;IACd;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC,kJAAA,CAAA,SAAM;YACL,UAAU;YACV,UAAU;YACV,eAAe;gBAAE,MAAM;gBAAI,UAAU;YAAG;sBAExC,cAAA,6LAAC,kJAAA,CAAA,OAAI;gBAAC,WAAU;;kCACd,6LAAC;wBAAG,WAAU;kCAAqB;;;;;;kCACnC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,SAAQ;gCAAO,WAAU;0CAAU;;;;;;0CAG1C,6LAAC,kJAAA,CAAA,QAAK;gCACJ,IAAG;gCACH,MAAK;gCACL,aAAY;gCACZ,WAAU;;;;;;;;;;;;kCAGd,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAM,SAAQ;gCAAW,WAAU;0CAAU;;;;;;0CAG9C,6LAAC,kJAAA,CAAA,QAAK;gCACJ,IAAG;gCACH,MAAK;gCACL,aAAY;gCACZ,WAAU;;;;;;;;;;;;kCAGd,6LAAC;wBACC,MAAK;wBACL,WAAU;kCACX;;;;;;kCAID,6LAAC;wBACC,MAAK;wBACL,SAAS,IAAM,OAAO,IAAI,CAAC;wBAC3B,WAAU;kCACX;;;;;;;;;;;;;;;;;;;;;;AAOX;GA3EwB;;QACP,qIAAA,CAAA,YAAS;;;KADF","debugId":null}}]
}