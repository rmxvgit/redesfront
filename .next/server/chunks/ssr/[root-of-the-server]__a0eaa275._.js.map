{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///home/rafa/tudo/materias/redes/redesfront/src/lib/requisition.tsx"],"sourcesContent":["\"use client\";\nconst backendUrl = \"https://backredes-production.up.railway.app\";\nimport axios from \"axios\";\nimport { CardPdfPost, CardPngPost, CardTxtPost, Post } from \"./interfaces\";\nimport { UserProfileData } from \"@/lib/interfaces\";\n\nexport async function login(values: { name: string; password: string }) {\n  const response = await axios.post(`${backendUrl}/auth/login`, values);\n  return response;\n}\n\nexport async function register(\n  values: {\n    name: string;\n    password: string;\n    bio: string;\n    job: string;\n  },\n  file: File | null,\n) {\n  const form_data = new FormData();\n  if (file) {\n    form_data.append(\"image\", file);\n  }\n  form_data.append(\"name\", values.name);\n  form_data.append(\"password\", values.password);\n  form_data.append(\"bio\", values.bio);\n  form_data.append(\"job\", values.job);\n\n  const response = await axios.post(`${backendUrl}/user`, form_data, {\n    headers: { \"Content-Type\": \"multipart/form-data\" },\n  });\n\n  return response;\n}\n\nexport async function editProfileRequisition(\n  data: {\n    name: string | undefined;\n    password: string | undefined;\n    bio: string | undefined;\n    job: string | undefined;\n  },\n  file: File | null,\n) {\n  const token = localStorage.getItem(\"token\");\n\n  const fields_edition = await axios.patch(`${backendUrl}/user`, data, {\n    headers: { Authorization: `Bearer ${token}` },\n  });\n  if (file) {\n    const form_data = new FormData();\n    form_data.append(\"image\", file);\n\n    const image_edition = await axios.patch(\n      `${backendUrl}/user/image`,\n      form_data,\n      { headers: { Authorization: `Bearer ${token}` } },\n    );\n    return { fields_edition, image_edition };\n  }\n\n  return { fields_edition };\n}\n\nexport async function getPosts() {\n  const token = localStorage.getItem(\"token\");\n\n  const result = await Promise.all([\n    axios.get(`${backendUrl}/post/recent`, {\n      headers: { Authorization: `Bearer ${token}` },\n    }),\n    axios.get(`${backendUrl}/pdf/recent`, {\n      headers: { Authorization: `Bearer ${token}` },\n    }),\n    axios.get(`${backendUrl}/png/recent`, {\n      headers: { Authorization: `Bearer ${token}` },\n    }),\n  ]);\n\n  const [txt_result, pdf_result, png_result] = result.values();\n\n  if (\n    txt_result.status === 200 &&\n    pdf_result.status === 200 &&\n    png_result.status === 200\n  ) {\n    const txts: ServerTxtPost[] = txt_result.data;\n    const pdfs: ServerPdfPost[] = pdf_result.data;\n    const pngs: ServerPngPost[] = png_result.data;\n\n    const posts: Post[] = [\n      ...txts.map(servToCardTxtPost),\n      ...pdfs.map(servToCardPdfPost),\n      ...pngs.map(servToCardPngPost),\n    ];\n\n    return posts;\n  }\n\n  throw new Error(\"Failed to fetch posts\");\n}\n\nexport async function getUsers() {\n  const token = localStorage.getItem(\"token\");\n\n  const result = await axios.get(`${backendUrl}/user`, {\n    headers: { Authorization: `Bearer ${token}` },\n  });\n\n  if (result.status === 200) {\n    const user: ServerUser[] = result.data;\n\n    return user;\n  }\n\n  throw new Error(\"Failed to fetch user\");\n}\n\nexport async function getUserProfile(user_id: string) {\n  const token = localStorage.getItem(\"token\");\n\n  const result = await axios.get(`${backendUrl}/user/profile${user_id}`, {\n    headers: { Authorization: `Bearer ${token}` },\n  });\n\n  if (result.status === 200) {\n    const user: ServerUserProfile = result.data;\n\n    const client_data: UserProfileData = {\n      id: user.id,\n      owner: user.owner,\n      name: user.name,\n      bio: user.bio,\n      image: user.image,\n      job: user.job,\n      posts: [\n        ...user.posts.map(servToCardTxtPost),\n        ...user.pdfs.map(servToCardPdfPost),\n        ...user.pngs.map(servToCardPngPost),\n      ],\n    };\n\n    return client_data;\n  }\n\n  throw new Error(\"Failed to fetch user\");\n}\n\nexport async function makeFilePost(\n  file: File,\n  title: string,\n  type: \"pdf\" | \"png\",\n) {\n  if (file.name.split(\".\").at(-1) != type) {\n    throw new Error(\"formato de arquivo inválido\");\n  }\n\n  const token = localStorage.getItem(\"token\");\n  const form_data = new FormData();\n  form_data.append(\"title\", title);\n  form_data.append(\"image\", file);\n\n  const response = await axios.post(`${backendUrl}/${type}`, form_data, {\n    headers: {\n      \"Content-Type\": \"multipart/form-data\",\n      Authorization: `Bearer ${token}`,\n    },\n  });\n\n  return response;\n}\n\nexport function getPngUrl(entity_id: number, entity_type: \"user\" | \"post\") {\n  const path = `${backendUrl}/png/see${entity_type[0]}${entity_id}.png`;\n  console.log(path);\n  return path;\n}\n\nexport function getPdfUrl(entity_id: number) {\n  const path = `${backendUrl}/pdf/seep${entity_id}.pdf`;\n  console.log(path);\n  return path;\n}\n\ninterface ServerUserProfile {\n  id: number;\n  owner: boolean;\n  name: string;\n  image: string;\n  bio: string;\n  job: string;\n  pngs: ServerPngPost[];\n  pdfs: ServerPdfPost[];\n  posts: ServerTxtPost[];\n}\n\ninterface ServerUser {\n  id: number;\n  name: string;\n  image: string;\n  job: string;\n}\n\ninterface ServerTxtPost {\n  id: number;\n  title: string;\n  body: string;\n  createdAt: Date;\n  user: {\n    id: number;\n    name: string;\n  };\n}\n\ninterface ServerPdfPost {\n  id: number;\n  title: string;\n  file_name: string;\n  createdAt: Date;\n  user: {\n    id: number;\n    name: string;\n  };\n}\n\ninterface ServerPngPost {\n  id: number;\n  title: string;\n  file_name: string;\n  createdAt: Date;\n  user: {\n    id: number;\n    name: string;\n  };\n}\n\nfunction servToCardTxtPost(post: ServerTxtPost): CardTxtPost {\n  return {\n    txt: undefined,\n    id: post.id,\n    title: post.title,\n    body: post.body,\n    author_id: post.user.id,\n    author_name: post.user.name,\n  };\n}\n\nfunction servToCardPdfPost(post: ServerPdfPost): CardPdfPost {\n  return {\n    pdf: undefined,\n    id: post.id,\n    title: post.title,\n    file_name: post.file_name,\n    author_id: post.user.id,\n    author_name: post.user.name,\n  };\n}\n\nfunction servToCardPngPost(post: ServerPngPost): CardPngPost {\n  return {\n    png: undefined,\n    id: post.id,\n    title: post.title,\n    file_name: post.file_name,\n    author_id: post.user.id,\n    author_name: post.user.name,\n  };\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 304, "column": 0}, "map": {"version":3,"sources":["file:///home/rafa/tudo/materias/redes/redesfront/src/components/pdf_viewer.tsx"],"sourcesContent":["// components/PdfViewer.jsx\n\"use client\";\nimport { pdfjs } from \"react-pdf\";\nimport { Document, Page } from \"react-pdf\";\n\npdfjs.GlobalWorkerOptions.workerSrc = new URL(\n  \"pdfjs-dist/build/pdf.worker.min.mjs\",\n  import.meta.url,\n).toString();\n\nexport default function PdfViewer({ url }: { url: string }) {\n  return (\n    <div>\n      <Document file={url}>\n        <Page\n          pageNumber={1}\n          renderTextLayer={false}\n          renderAnnotationLayer={false}\n          width={300}\n        />\n      </Document>\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA,2BAA2B;;;;;AAE3B;AACA;AAAA;;;;;;AAFA;;;;AAIA,+KAAA,CAAA,QAAK,CAAC,mBAAmB,CAAC,SAAS,GAAG,0IAGpC,QAAQ;AAEK,SAAS,UAAU,EAAE,GAAG,EAAmB;IACxD,qBACE,8OAAC;kBACC,cAAA,8OAAC,8LAAA,CAAA,WAAQ;YAAC,MAAM;sBACd,cAAA,8OAAC,sLAAA,CAAA,OAAI;gBACH,YAAY;gBACZ,iBAAiB;gBACjB,uBAAuB;gBACvB,OAAO;;;;;;;;;;;;;;;;AAKjB","debugId":null}},
    {"offset": {"line": 353, "column": 0}, "map": {"version":3,"sources":["file:///home/rafa/tudo/materias/redes/redesfront/src/components/postcard.tsx"],"sourcesContent":["import { Post } from \"@/lib/interfaces\";\nimport Link from \"next/link\";\nimport { getPdfUrl, getPngUrl } from \"@/lib/requisition\";\nimport Image from \"next/image\";\nimport { JSX } from \"react\";\nimport PdfViewer from \"./pdf_viewer\";\n\nexport function makePostCard(data: Post) {\n  let content: JSX.Element = <></>;\n  let doc_type: string = \"none\";\n\n  if (\"png\" in data) {\n    content = (\n      <div className=\"flex justify-center\">\n        <Image\n          src={getPngUrl(data.id, \"post\")}\n          alt=\"postagem\"\n          width={500}\n          height={500}\n          className=\"w-full rounded-lg\"\n        />\n      </div>\n    );\n    doc_type = \"png\";\n  }\n\n  if (\"pdf\" in data) {\n    content = (\n      <Link\n        href={getPdfUrl(data.id)}\n        className=\"flex justify-center overflow-hidden rounded-lg\"\n      >\n        <PdfViewer url={getPdfUrl(data.id)} />\n      </Link>\n    );\n    doc_type = \"pdf\";\n  }\n\n  if (\"txt\" in data) {\n    content = <p>{data.body}</p>;\n    doc_type = \"txt\";\n  }\n\n  return (\n    <div\n      key={`${data.id}${doc_type}`}\n      className=\"bg-white rounded-lg shadow-md p-4 border w-78 h-106 overflow-hidden\"\n    >\n      <div className=\"flex justify-between\">\n        <h4 className=\"font-bold text-sm\">{data.author_name} postou:</h4>\n        <p className=\"bg-blue-400 px-2 rounded-full\">{doc_type}</p>\n      </div>\n      <p className=\"text-lg font-bold mb-3\">{data.title}</p>\n      {content}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAEA;;;;;;AAEO,SAAS,aAAa,IAAU;IACrC,IAAI,wBAAuB;IAC3B,IAAI,WAAmB;IAEvB,IAAI,SAAS,MAAM;QACjB,wBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC,6HAAA,CAAA,UAAK;gBACJ,KAAK,CAAA,GAAA,0HAAA,CAAA,YAAS,AAAD,EAAE,KAAK,EAAE,EAAE;gBACxB,KAAI;gBACJ,OAAO;gBACP,QAAQ;gBACR,WAAU;;;;;;;;;;;QAIhB,WAAW;IACb;IAEA,IAAI,SAAS,MAAM;QACjB,wBACE,8OAAC,4JAAA,CAAA,UAAI;YACH,MAAM,CAAA,GAAA,0HAAA,CAAA,YAAS,AAAD,EAAE,KAAK,EAAE;YACvB,WAAU;sBAEV,cAAA,8OAAC,gIAAA,CAAA,UAAS;gBAAC,KAAK,CAAA,GAAA,0HAAA,CAAA,YAAS,AAAD,EAAE,KAAK,EAAE;;;;;;;;;;;QAGrC,WAAW;IACb;IAEA,IAAI,SAAS,MAAM;QACjB,wBAAU,8OAAC;sBAAG,KAAK,IAAI;;;;;;QACvB,WAAW;IACb;IAEA,qBACE,8OAAC;QAEC,WAAU;;0BAEV,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;;4BAAqB,KAAK,WAAW;4BAAC;;;;;;;kCACpD,8OAAC;wBAAE,WAAU;kCAAiC;;;;;;;;;;;;0BAEhD,8OAAC;gBAAE,WAAU;0BAA0B,KAAK,KAAK;;;;;;YAChD;;OARI,GAAG,KAAK,EAAE,GAAG,UAAU;;;;;AAWlC","debugId":null}},
    {"offset": {"line": 471, "column": 0}, "map": {"version":3,"sources":["file:///home/rafa/tudo/materias/redes/redesfront/src/app/%28protected%29/profile/%5Bprofile%5D/forms.tsx"],"sourcesContent":["import { makeFilePost } from \"@/lib/requisition\";\nimport { Formik, Form, Field } from \"formik\";\nimport { AppRouterInstance } from \"next/dist/shared/lib/app-router-context.shared-runtime\";\nimport Image from \"next/image\";\nimport { Dispatch, SetStateAction } from \"react\";\n\nexport default function NewPostForm(\n  post_type: \"png\" | \"pdf\" | \"txt\" | \"none\",\n  errorMsg: string,\n  setErrMsg: Dispatch<SetStateAction<string>>,\n  file: File | null,\n  setFile: Dispatch<SetStateAction<File | null>>,\n  router: AppRouterInstance,\n) {\n  if (post_type == \"txt\") {\n    return NewTxtForm();\n  }\n\n  if (post_type == \"png\") {\n    return NewPngForm(errorMsg, setErrMsg, file, setFile, router);\n  }\n\n  return NewPdfForm(errorMsg, setErrMsg, file, setFile, router);\n}\n\nexport function NewPngForm(\n  errorMsg: string,\n  setErrMsg: Dispatch<SetStateAction<string>>,\n  file: File | null,\n  setFile: Dispatch<SetStateAction<File | null>>,\n  router: AppRouterInstance,\n) {\n  function postFormSubmit(values: { title: string }) {\n    console.log(\"submit button pressed\");\n    console.log(values);\n    if (file == null) {\n      setErrMsg(\"arquivo não foi selecionado\");\n      return;\n    }\n\n    const promise = makeFilePost(file, values.title, \"png\");\n\n    promise.then((result) => {\n      if (result.status === 201) {\n        setErrMsg(\"\");\n        console.log(\"sucesso png\");\n        return;\n      }\n      console.log(result);\n    });\n\n    promise.catch((err) => {\n      if (err.status === 403) {\n        console.log(err);\n        router.push(\"/login\");\n      }\n    });\n  }\n\n  return (\n    <Formik initialValues={{ title: \"\" }} onSubmit={postFormSubmit}>\n      <Form className=\"flex flex-col gap-3\">\n        <p>{errorMsg}</p>\n        <Field\n          name=\"title\"\n          placeholder=\"Título do png\"\n          className=\"border p-2 rounded\"\n        ></Field>\n\n        <div className=\"flex justify-start gap-3\">\n          <div className=\"flex gap-3 border rounded-lg p-2 \">\n            <Image src=\"/file.svg\" alt=\"file icon\" height={20} width={20} />\n            <input\n              type=\"file\"\n              onChange={(e) => {\n                setFile(\n                  e.currentTarget.files ? e.currentTarget.files[0] : null,\n                );\n              }}\n              placeholder=\"batata\"\n              className=\"text-lg\"\n            />\n          </div>\n          <button type=\"submit\" className=\"border rounded-lg p-2\">\n            Enviar\n          </button>\n        </div>\n      </Form>\n    </Formik>\n  );\n}\n\nexport function NewPdfForm(\n  errorMsg: string,\n  setErrMsg: Dispatch<SetStateAction<string>>,\n  file: File | null,\n  setFile: Dispatch<SetStateAction<File | null>>,\n  router: AppRouterInstance,\n) {\n  function postFormSubmit(values: { title: string }) {\n    console.log(\"submit button pressed\");\n    console.log(values);\n    if (file == null) {\n      setErrMsg(\"arquivo não foi selecionado\");\n      return;\n    }\n\n    const promise = makeFilePost(file, values.title, \"pdf\");\n\n    promise.then((result) => {\n      if (result.status === 201) {\n        setErrMsg(\"\");\n        console.log(\"sucesso png\");\n        return;\n      }\n      console.log(result);\n    });\n\n    promise.catch((err) => {\n      if (err.status === 403) {\n        console.log(err);\n        router.push(\"/login\");\n      }\n    });\n  }\n\n  return (\n    <Formik initialValues={{ title: \"\" }} onSubmit={postFormSubmit}>\n      <Form className=\"flex flex-col gap-3\">\n        <p>{errorMsg}</p>\n        <Field\n          name=\"title\"\n          placeholder=\"Título do png\"\n          className=\"border p-2 rounded\"\n        ></Field>\n\n        <div className=\"flex justify-start gap-3\">\n          <div className=\"flex gap-3 border rounded-lg p-2 \">\n            <Image src=\"/file.svg\" alt=\"file icon\" height={20} width={20} />\n            <input\n              type=\"file\"\n              onChange={(e) => {\n                setFile(\n                  e.currentTarget.files ? e.currentTarget.files[0] : null,\n                );\n              }}\n              placeholder=\"batata\"\n              className=\"text-lg\"\n            />\n          </div>\n          <button type=\"submit\" className=\"border rounded-lg p-2\">\n            Enviar\n          </button>\n        </div>\n      </Form>\n    </Formik>\n  );\n}\n\nexport function NewTxtForm() {\n  function postFormSubmit(values: { title: string; body: string }) {\n    console.log(\"submit button pressed\");\n    console.log(values);\n  }\n\n  return (\n    <Formik initialValues={{ title: \"\", body: \"\" }} onSubmit={postFormSubmit}>\n      <Form className=\"flex flex-col gap-3\">\n        <Field\n          name=\"title\"\n          placeholder=\"Título\"\n          className=\"border p-2 rounded\"\n        />\n        <Field\n          name=\"body\"\n          placeholder=\"Conteúdo\"\n          className=\"border p-2 rounded\"\n        />\n      </Form>\n    </Formik>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 762, "column": 0}, "map": {"version":3,"sources":["file:///home/rafa/tudo/materias/redes/redesfront/src/app/%28protected%29/profile/%5Bprofile%5D/page.tsx"],"sourcesContent":["\"use client\";\nimport { getPngUrl, getUserProfile } from \"@/lib/requisition\";\nimport { useEffect, useState } from \"react\";\nimport { useParams } from \"next/navigation\";\nimport { AxiosError } from \"axios\";\nimport { useRouter } from \"next/navigation\";\nimport { makePostCard } from \"@/components/postcard\";\nimport { UserProfileData } from \"@/lib/interfaces\";\nimport Image from \"next/image\";\nimport NewPostForm from \"./forms\";\nimport Link from \"next/link\";\n\nexport default function UserProfilePage() {\n  const params = useParams<{ profile: string }>();\n  const [loading, setLoading] = useState(true);\n  const [newPostType, setPostType] = useState<\"pdf\" | \"png\" | \"txt\" | \"none\">(\n    \"none\",\n  );\n  const [errorMsg, setErrMsg] = useState<string>(\"\");\n  const [file, setFile] = useState<File | null>(null);\n\n  const router = useRouter();\n  const profile_id = params.profile;\n\n  const [user, setUser] = useState<UserProfileData>({\n    id: 0,\n    owner: true,\n    name: \"\",\n    bio: \"\",\n    image: \"\",\n    job: \"\",\n    posts: [],\n  });\n\n  useEffect(() => {\n    const response = getUserProfile(profile_id);\n\n    response.then((result) => {\n      setUser(result);\n      setLoading(false);\n    });\n\n    response.catch((err) => {\n      if (err instanceof AxiosError) {\n        if (err.status === 403) {\n          router.push(\"/login\");\n        }\n      }\n      console.error(err);\n      setLoading(false);\n    });\n  }, [setUser, profile_id, router]);\n\n  if (loading) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <div className=\"p-12 flex flex-col gap-10\">\n      <div className=\"flex p-3 rounded gap-12\">\n        {/* foto de perfil */}\n        <div className=\"flex gap-10 justify-center\">\n          <div className=\"border rounded-full w-60 aspect-square overflow-hidden\">\n            <Image\n              src={getPngUrl(user.id, \"user\")}\n              alt=\"profile image\"\n              width={160}\n              height={160}\n              className=\"w-full\"\n            />\n          </div>\n        </div>\n\n        {/* nome e cargo */}\n        <div className=\"flex flex-col gap-4\">\n          <div className=\"flex gap-6\">\n            <h1 className=\"text-5xl font-bold content-center\">\n              {user.owner ? \"Seu perfil\" : `${user.name}`}\n            </h1>\n            <p className=\"content-center text-4xl font-bold\">-</p>\n            <p className=\"content-center text-2xl\">{user.job}</p>\n          </div>\n          {user.owner ? (\n            <Link\n              href=\"/edit_profile\"\n              className=\"bg-blue-400 rounded-xl p-2 text-2xl font-bold w-fit hover:bg-blue-500\"\n            >\n              Editar perfil\n            </Link>\n          ) : null}\n        </div>\n      </div>\n\n      {/* bio */}\n      <div className=\"border p-3 rounded-lg flex flex-col gap-5\">\n        <h2 className=\"text-2xl font-bold\">Sobre mim:</h2>\n        <p className=\"border rounded-lg p-2\">\n          {user.bio === \"\" ? \"Não há bio disponível.\" : user.bio}\n        </p>\n      </div>\n\n      {/* nova postagem */}\n      {user.owner ? (\n        newPostType == \"none\" ? (\n          <div className=\"flex justify-start\">\n            <button\n              className=\"text-2xl font-bold border rounded-lg p-2\"\n              onClick={() => setPostType(\"txt\")}\n            >\n              Fazer postagem\n            </button>\n          </div>\n        ) : (\n          <div className=\"rounded-lg border p-3 flex flex-col gap-5\">\n            <div className=\"flex justify-between\">\n              <h2 className=\"text-2xl font-bold\">Nova postagem:</h2>\n              <div className=\"flex gap-3\">\n                <button\n                  className={`p-2 rounded-lg border ${newPostType == \"txt\" ? \"bg-blue-400\" : \"\"}`}\n                  onClick={() => setPostType(\"txt\")}\n                >\n                  Texto\n                </button>\n                <button\n                  className={`p-2 rounded-lg border ${newPostType == \"pdf\" ? \"bg-blue-400\" : \"\"}`}\n                  onClick={() => setPostType(\"pdf\")}\n                >\n                  Pdf\n                </button>\n                <button\n                  className={`p-2 rounded-lg border ${newPostType == \"png\" ? \"bg-blue-400\" : \"\"}`}\n                  onClick={() => setPostType(\"png\")}\n                >\n                  Png\n                </button>\n              </div>\n            </div>\n            {NewPostForm(\n              newPostType,\n              errorMsg,\n              setErrMsg,\n              file,\n              setFile,\n              router,\n            )}\n          </div>\n        )\n      ) : null}\n\n      {/* postagens */}\n      <h2 className=\"text-2xl p-3 font-bold\">Postagens:</h2>\n      <div className=\"flex gap-3 flex-wrap \">\n        {user.posts.map(makePostCard)}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}